<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Type Conversions</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Indented1 {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-bottom: 0.6em}
    DIV.WideAbove {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-top: 0.6em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em; margin-bottom: 0.6em}
    DIV.NotesHeader {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 3.4em; margin-bottom: 0.6em}
    DIV.Bulleted-NoPrefix {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    DIV.Indented2NestedBulleted-NoPrefix {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 5.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Indented2NestedBulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 5.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    DIV.Indented3NestedBulleted-NoPrefix {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 7.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Indented3NestedBulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 7.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><SPAN Style="font-size:200%; color: rgb(0,0,153)"><B>Ada Reference Manual</B></SPAN> &mdash; <A HREF="RM-TTL.html"><B>Legal Information</B></A></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="RM-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-4-5-8.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-4-7.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>4.6 Type Conversions</H1>
<div class="paranum">1</div>
<div class="Normal">Explicit type conversions, both value conversions 
and view conversions, are allowed between closely related types as defined 
below. This clause also defines rules for value and view conversions 
to a particular subtype of a type, both explicit ones and those implicit 
in other constructs. <A NAME="I2910"></A><A NAME="I2911"></A><A NAME="I2912"></A><A NAME="I2913"></A><A NAME="I2914"></A><A NAME="I2915"></A></div>

<H4 Class="centered">Syntax</H4>
<div class="paranum">2</div>
<div class="Indented1"><SPAN Class="swiss">type_conversion</SPAN><A NAME="I2916"></A><A NAME="S0141"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<A NAME="I2917"></A><SPAN Class="swiss"><A HREF="RM-3-2-2.html#S0028">subtype_mark</A></SPAN>(<A NAME="I2918"></A><SPAN Class="swiss"><A HREF="RM-4-4.html#S0117">expression</A></SPAN>)<BR>
&nbsp;&nbsp;|&nbsp;<A NAME="I2919"></A><SPAN Class="swiss"><A HREF="RM-3-2-2.html#S0028">subtype_mark</A></SPAN>(<A NAME="I2920"></A><SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN>)</div>
<div class="paranum">3</div>
<div class="Normal"><A NAME="I2921"></A>The <I>target subtype</I> of 
a <SPAN Class="swiss"><A HREF="RM-4-6.html#S0141">type_conversion</A></SPAN> 
is the subtype denoted by the <SPAN Class="swiss"><A HREF="RM-3-2-2.html#S0028">subtype_mark</A></SPAN>. 
<A NAME="I2922"></A>The <I>operand</I> of a <SPAN Class="swiss"><A HREF="RM-4-6.html#S0141">type_conversion</A></SPAN> 
is the <SPAN Class="swiss"><A HREF="RM-4-4.html#S0117">expression</A></SPAN> 
or <SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN> within 
the parentheses; <A NAME="I2923"></A>its type is the <I>operand type</I>.</div>
<div class="paranum">4</div>
<div class="Normal"><A NAME="I2924"></A>One type is <I>convertible</I> 
to a second type if a <SPAN Class="swiss"><A HREF="RM-4-6.html#S0141">type_conversion</A></SPAN> 
with the first type as operand type and the second type as target type 
is legal according to the rules of this clause. Two types are convertible 
if each is convertible to the other.&nbsp;</div>
<div class="paranum">5/2</div>
<div class="Normal"><A NAME="I2925"></A><A NAME="I2926"></A>A <SPAN Class="swiss"><A HREF="RM-4-6.html#S0141">type_conversion</A></SPAN> 
whose operand is the <SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN> 
of an object is called a <I>view conversion</I> if both its target type 
and operand type are tagged, or if it appears in a call as an actual 
parameter of mode <B>out</B> or <B>in out</B>; <A NAME="I2927"></A><A NAME="I2928"></A>other 
<SPAN Class="swiss"><A HREF="RM-4-6.html#S0141">type_conversion</A></SPAN>s 
are called <I>value conversions</I>. <A NAME="I2929"></A></div>

<H4 Class="centered">Name Resolution Rules</H4>
<div class="paranum">6</div>
<div class="Normal"><A NAME="I2930"></A>The operand of a <SPAN Class="swiss"><A HREF="RM-4-6.html#S0141">type_conversion</A></SPAN> 
is expected to be of any type.&nbsp;</div>
<div class="paranum">7</div>
<div class="Normal">The operand of a view conversion is interpreted only 
as a <SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN>; 
the operand of a value conversion is interpreted as an <SPAN Class="swiss"><A HREF="RM-4-4.html#S0117">expression</A></SPAN>. 
</div>

<H4 Class="centered">Legality Rules</H4>
<div class="paranum">8/2</div>
<div class="Normal">In a view conversion for an untagged type, the target 
type shall be convertible (back) to the operand type.&nbsp;</div>
<div class="Normal"><SPAN STYLE="font-size: 80%"><I>Paragraphs 9 through 
20 were reorganized and moved below.</I></SPAN>&nbsp;</div>
<div class="paranum">21/3</div>
<div class="Normal" style="margin-bottom: 0.4em">&nbsp;<A NAME="I2931"></A><A NAME="I2932"></A>If 
there is a type (other than a root numeric type) that is an ancestor 
of both the target type and the operand type, or both types are class-wide 
types, then at least one of the following rules shall apply:&nbsp;</div>
<div class="paranum">21.1/2</div>
<div class="Bulleted"><A NAME="I2933"></A><A NAME="I2934"></A>The target 
type shall be untagged; or</div>
<div class="paranum">22</div>
<div class="Bulleted">The operand type shall be covered by or descended 
from the target type; or&nbsp;</div>
<div class="paranum">23/2</div>
<div class="Bulleted">The operand type shall be a class-wide type that 
covers the target type; or&nbsp;</div>
<div class="paranum">23.1/2</div>
<div class="Bulleted">The operand and target types shall both be class-wide 
types and the specific type associated with at least one of them shall 
be an interface type.&nbsp;</div>
<div class="paranum">24/3</div>
<div class="Normal">&nbsp;If there is no type (other than a root numeric type) 
that is the ancestor of both the target type and the operand type, and 
they are not both class-wide types, one of the following rules shall 
apply:&nbsp;</div>
<div class="paranum">24.1/2</div>
<div class="Bulleted"><A NAME="I2935"></A><A NAME="I2936"></A>If the 
target type is a numeric type, then the operand type shall be a numeric 
type.</div>
<div class="paranum">24.2/2</div>
<div class="Bulleted" style="margin-bottom: 0.3em"><A NAME="I2937"></A><A NAME="I2938"></A>If 
the target type is an array type, then the operand type shall be an array 
type. Further:</div>
<div class="paranum">24.3/2</div>
<div class="Indented2NestedBulleted">The types shall have the same dimensionality;</div>
<div class="paranum">24.4/2</div>
<div class="Indented2NestedBulleted">Corresponding index types shall 
be convertible; <A NAME="I2939"></A></div>
<div class="paranum">24.5/2</div>
<div class="Indented2NestedBulleted">The component subtypes shall statically 
match; <A NAME="I2940"></A></div>
<div class="paranum">24.6/2</div>
<div class="Indented2NestedBulleted">If the component types are anonymous 
access types, then the accessibility level of the operand type shall 
not be statically deeper than that of the target type; <A NAME="I2941"></A></div>
<div class="paranum">24.7/2</div>
<div class="Indented2NestedBulleted">Neither the target type nor the 
operand type shall be limited;&nbsp;</div>
<div class="paranum">24.8/2</div>
<div class="Indented2NestedBulleted">If the target type of a view conversion 
has aliased components, then so shall the operand type; and&nbsp;</div>
<div class="paranum">24.9/2</div>
<div class="Indented2NestedBulleted">The operand type of a view conversion 
shall not have a tagged, private, or volatile subcomponent.&nbsp;</div>
<div class="paranum">24.10/2</div>
<div class="Bulleted">If the target type is <I>universal_access</I>, 
then the operand type shall be an access type.</div>
<div class="paranum">24.11/2</div>
<div class="Bulleted" style="margin-bottom: 0.3em"><A NAME="I2942"></A><A NAME="I2943"></A>If 
the target type is a general access-to-object type, then the operand 
type shall be <I>universal_access</I> or an access-to-object type. Further, 
if the operand type is not <I>universal_access</I>:</div>
<div class="paranum">24.12/2</div>
<div class="Indented2NestedBulleted">If the target type is an access-to-variable 
type, then the operand type shall be an access-to-variable type;&nbsp;</div>
<div class="paranum">24.13/2</div>
<div class="Indented2NestedBulleted">If the target designated type is 
tagged, then the operand designated type shall be convertible to the 
target designated type; <A NAME="I2944"></A></div>
<div class="paranum">24.14/2</div>
<div class="Indented2NestedBulleted" style="margin-bottom: 0.3em">If 
the target designated type is not tagged, then the designated types shall 
be the same, and either:</div>
<div class="paranum">24.15/2</div>
<div class="Indented3NestedBulleted">the designated subtypes shall statically 
match; or<A NAME="I2945"></A></div>
<div class="paranum">24.16/2</div>
<div class="Indented3NestedBulleted">the designated type shall be discriminated 
in its full view and unconstrained in any partial view, and one of the 
designated subtypes shall be unconstrained;</div>
<div class="paranum">24.17/3</div>
<div class="Indented2NestedBulleted"><A NAME="I2946"></A>The accessibility 
level of the operand type shall not be statically deeper than that of 
the target type, unless the target type is an anonymous access type of 
a stand-alone object. If the target type is that of such a stand-alone 
object, the accessibility level of the operand type shall not be statically 
deeper than that of the declaration of the stand-alone object. <A NAME="I2947"></A>In 
addition to the places where Legality Rules normally apply (see <A HREF="RM-12-3.html">12.3</A>), 
this rule applies also in the private part of an instance of a generic 
unit.&nbsp;</div>
<div class="paranum">24.18/2</div>
<div class="Bulleted"><A NAME="I2948"></A><A NAME="I2949"></A>If the 
target type is a pool-specific access-to-object type, then the operand 
type shall be <I>universal_access</I>.&nbsp;</div>
<div class="paranum">24.19/2</div>
<div class="Bulleted" style="margin-bottom: 0.3em"><A NAME="I2950"></A><A NAME="I2951"></A>If 
the target type is an access-to-subprogram type, then the operand type 
shall be <I>universal_access</I> or an access-to-subprogram type. Further, 
if the operand type is not <I>universal_access</I>:</div>
<div class="paranum">24.20/3</div>
<div class="Indented2NestedBulleted">The designated profiles shall be 
subtype conformant. <A NAME="I2952"></A></div>
<div class="paranum">24.21/2</div>
<div class="Indented2NestedBulleted"><A NAME="I2953"></A>The accessibility 
level of the operand type shall not be statically deeper than that of 
the target type. <A NAME="I2954"></A>In addition to the places where 
Legality Rules normally apply (see <A HREF="RM-12-3.html">12.3</A>), 
this rule applies also in the private part of an instance of a generic 
unit. If the operand type is declared within a generic body, the target 
type shall be declared within the generic body.</div>

<H4 Class="centered">Static Semantics</H4>
<div class="paranum">25</div>
<div class="Normal">A <SPAN Class="swiss"><A HREF="RM-4-6.html#S0141">type_conversion</A></SPAN> 
that is a value conversion denotes the value that is the result of converting 
the value of the operand to the target subtype.</div>
<div class="paranum">26/3</div>
<div class="Normal">&nbsp;A <SPAN Class="swiss"><A HREF="RM-4-6.html#S0141">type_conversion</A></SPAN> 
that is a view conversion denotes a view of the object denoted by the 
operand. This view is a variable of the target type if the operand denotes 
a variable; otherwise, it is a constant of the target type.</div>
<div class="paranum">27</div>
<div class="Normal"><A NAME="I2955"></A>The nominal subtype of a <SPAN Class="swiss"><A HREF="RM-4-6.html#S0141">type_conversion</A></SPAN> 
is its target subtype.&nbsp;</div>

<H4 Class="centered">Dynamic Semantics</H4>
<div class="paranum">28</div>
<div class="Normal" style="margin-bottom: 0.4em"><A NAME="I2956"></A><A NAME="I2957"></A><A NAME="I2958"></A>For 
the evaluation of a <SPAN Class="swiss"><A HREF="RM-4-6.html#S0141">type_conversion</A></SPAN> 
that is a value conversion, the operand is evaluated, and then the value 
of the operand is <I>converted</I> to a <I>corresponding</I> value of 
the target type, if any. <A NAME="I2959"></A><A NAME="I2960"></A><A NAME="I2961"></A>If 
there is no value of the target type that corresponds to the operand 
value, Constraint_Error is raised; this can only happen on conversion 
to a modular type, and only when the operand value is outside the base 
range of the modular type. Additional rules follow:&nbsp;</div>
<div class="paranum">29</div>
<div class="Bulleted"><A NAME="I2962"></A><A NAME="I2963"></A>Numeric 
Type Conversion&nbsp;</div>
<div class="paranum">30</div>
<div class="Indented2NestedBulleted">If the target and the operand types 
are both integer types, then the result is the value of the target type 
that corresponds to the same mathematical integer as the operand.</div>
<div class="paranum">31</div>
<div class="Indented2NestedBulleted">If the target type is a decimal 
fixed point type, then the result is truncated (toward 0) if the value 
of the operand is not a multiple of the <I>small</I> of the target type.</div>
<div class="paranum">32</div>
<div class="Indented2NestedBulleted"><A NAME="I2964"></A>If the target 
type is some other real type, then the result is within the accuracy 
of the target type (see <A HREF="RM-G-2.html">G.2</A>, &ldquo;<A HREF="RM-G-2.html">Numeric 
Performance Requirements</A>&rdquo;, for implementations that support 
the Numerics Annex).&nbsp;</div>
<div class="paranum">33</div>
<div class="Indented2NestedBulleted">If the target type is an integer 
type and the operand type is real, the result is rounded to the nearest 
integer (away from zero if exactly halfway between two integers).&nbsp;</div>
<div class="paranum">34</div>
<div class="Bulleted"><A NAME="I2965"></A><A NAME="I2966"></A>Enumeration 
Type Conversion&nbsp;</div>
<div class="paranum">35</div>
<div class="Indented2NestedBulleted">The result is the value of the target 
type with the same position number as that of the operand value.&nbsp;</div>
<div class="paranum">36</div>
<div class="Bulleted"><A NAME="I2967"></A><A NAME="I2968"></A>Array Type 
Conversion&nbsp;</div>
<div class="paranum">37</div>
<div class="Indented2NestedBulleted"><A NAME="I2969"></A><A NAME="I2970"></A>If 
the target subtype is a constrained array subtype, then a check is made 
that the length of each dimension of the value of the operand equals 
the length of the corresponding dimension of the target subtype. The 
bounds of the result are those of the target subtype.</div>
<div class="paranum">38</div>
<div class="Indented2NestedBulleted"><A NAME="I2971"></A><A NAME="I2972"></A>If 
the target subtype is an unconstrained array subtype, then the bounds 
of the result are obtained by converting each bound of the value of the 
operand to the corresponding index type of the target type. <A NAME="I2973"></A>For 
each nonnull index range, a check is made that the bounds of the range 
belong to the corresponding index subtype.&nbsp;</div>
<div class="paranum">39</div>
<div class="Indented2NestedBulleted">In either array case, the value 
of each component of the result is that of the matching component of 
the operand value (see <A HREF="RM-4-5-2.html">4.5.2</A>).&nbsp;</div>
<div class="paranum">39.1/2</div>
<div class="Indented2NestedBulleted">If the component types of the array 
types are anonymous access types, then a check is made that the accessibility 
level of the operand type is not deeper than that of the target type. 
<A NAME="I2974"></A><A NAME="I2975"></A></div>
<div class="paranum">40</div>
<div class="Bulleted"><A NAME="I2976"></A><A NAME="I2977"></A>Composite 
(Non-Array) Type Conversion&nbsp;</div>
<div class="paranum">41</div>
<div class="Indented2NestedBulleted">The value of each nondiscriminant 
component of the result is that of the matching component of the operand 
value.&nbsp;</div>
<div class="paranum">42</div>
<div class="Indented2NestedBulleted">The tag of the result is that of 
the operand. <A NAME="I2978"></A><A NAME="I2979"></A>If the operand type 
is class-wide, a check is made that the tag of the operand identifies 
a (specific) type that is covered by or descended from the target type. 
</div>
<div class="paranum">43</div>
<div class="Indented2NestedBulleted">For each discriminant of the target 
type that corresponds to a discriminant of the operand type, its value 
is that of the corresponding discriminant of the operand value; <A NAME="I2980"></A><A NAME="I2981"></A>if 
it corresponds to more than one discriminant of the operand type, a check 
is made that all these discriminants are equal in the operand value.</div>
<div class="paranum">44</div>
<div class="Indented2NestedBulleted">For each discriminant of the target 
type that corresponds to a discriminant that is specified by the <SPAN Class="swiss"><A HREF="RM-3-4.html#S0035">derived_type_definition</A></SPAN> 
for some ancestor of the operand type (or if class-wide, some ancestor 
of the specific type identified by the tag of the operand), its value 
in the result is that specified by the <SPAN Class="swiss"><A HREF="RM-3-4.html#S0035">derived_type_definition</A></SPAN>. 
</div>
<div class="paranum">45</div>
<div class="Indented2NestedBulleted"><A NAME="I2982"></A><A NAME="I2983"></A>For 
each discriminant of the operand type that corresponds to a discriminant 
that is specified by the <SPAN Class="swiss"><A HREF="RM-3-4.html#S0035">derived_type_definition</A></SPAN> 
for some ancestor of the target type, a check is made that in the operand 
value it equals the value specified for it.</div>
<div class="paranum">46</div>
<div class="Indented2NestedBulleted"><A NAME="I2984"></A><A NAME="I2985"></A>For 
each discriminant of the result, a check is made that its value belongs 
to its subtype.&nbsp;</div>
<div class="paranum">47</div>
<div class="Bulleted"><A NAME="I2986"></A><A NAME="I2987"></A>Access 
Type Conversion&nbsp;</div>
<div class="paranum">48/3</div>
<div class="Indented2NestedBulleted">For an access-to-object type, a 
check is made that the accessibility level of the operand type is not 
deeper than that of the target type, unless the target type is an anonymous 
access type of a stand-alone object. If the target type is that of such 
a stand-alone object, a check is made that the accessibility level of 
the operand type is not deeper than that of the declaration of the stand-alone 
object; then if the check succeeds, the accessibility level of the target 
type becomes that of the operand type. <A NAME="I2988"></A><A NAME="I2989"></A></div>
<div class="paranum">49/2</div>
<div class="Indented2NestedBulleted">If the operand value is null, the 
result of the conversion is the null value of the target type.&nbsp;</div>
<div class="paranum">50</div>
<div class="Indented2NestedBulleted">If the operand value is not null, 
then the result designates the same object (or subprogram) as is designated 
by the operand value, but viewed as being of the target designated subtype 
(or profile); any checks associated with evaluating a conversion to the 
target designated subtype are performed.&nbsp;</div>
<div class="paranum">51/3</div>
<div class="Normal">&nbsp;<A NAME="I2990"></A><A NAME="I2991"></A><A NAME="I2992"></A><A NAME="I2993"></A><A NAME="I2994"></A><A NAME="I2995"></A><A NAME="I2996"></A><A NAME="I2997"></A>After 
conversion of the value to the target type, if the target subtype is 
constrained, a check is performed that the value satisfies this constraint. 
If the target subtype excludes null, then a check is made that the value 
is not null. If predicate checks are enabled for the target subtype (see 
<A HREF="RM-3-2-4.html">3.2.4</A>), a check is performed that the predicate 
of the target subtype is satisfied for the value.<A NAME="I2998"></A><A NAME="I2999"></A> 
</div>
<div class="paranum">52</div>
<div class="Normal"><A NAME="I3000"></A>For the evaluation of a view 
conversion, the operand <SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN> 
is evaluated, and a new view of the object denoted by the operand is 
created, whose type is the target type; <A NAME="I3001"></A><A NAME="I3002"></A><A NAME="I3003"></A><A NAME="I3004"></A><A NAME="I3005"></A><A NAME="I3006"></A>if 
the target type is composite, checks are performed as above for a value 
conversion.</div>
<div class="paranum">53</div>
<div class="Normal" style="margin-bottom: 0.4em">The properties of this 
new view are as follows:&nbsp;</div>
<div class="paranum">54/1</div>
<div class="Bulleted">If the target type is composite, the bounds or 
discriminants (if any) of the view are as defined above for a value conversion; 
each nondiscriminant component of the view denotes the matching component 
of the operand object; the subtype of the view is constrained if either 
the target subtype or the operand object is constrained, or if the target 
subtype is indefinite, or if the operand type is a descendant of the 
target type and has discriminants that were not inherited from the target 
type;</div>
<div class="paranum">55</div>
<div class="Bulleted">If the target type is tagged, then an assignment 
to the view assigns to the corresponding part of the object denoted by 
the operand; otherwise, an assignment to the view assigns to the object, 
after converting the assigned value to the subtype of the object (which 
might raise Constraint_Error); <A NAME="I3007"></A></div>
<div class="paranum">56</div>
<div class="Bulleted">Reading the value of the view yields the result 
of converting the value of the operand object to the target subtype (which 
might raise Constraint_Error), except if the object is of an access type 
and the view conversion is passed as an <B>out</B> parameter; in this 
latter case, the value of the operand object is used to initialize the 
formal parameter without checking against any constraint of the target 
subtype (see <A HREF="RM-6-4-1.html">6.4.1</A>). <A NAME="I3008"></A></div>
<div class="paranum">57/3</div>
<div class="Normal">&nbsp;<A NAME="I3009"></A><A NAME="I3010"></A><A NAME="I3011"></A>If 
an Accessibility_Check fails, Program_Error is raised. If a predicate 
check fails, Assertions.Assertion_Error is raised. Any other check associated 
with a conversion raises Constraint_Error if it fails.</div>
<div class="paranum">58</div>
<div class="Normal">Conversion to a type is the same as conversion to 
an unconstrained subtype of the type.&nbsp;</div>
<div class="NotesHeader">NOTES</div>
<div class="paranum">59</div>
<div class="Notes">19&nbsp;&nbsp;<A NAME="I3012"></A>In addition to explicit 
<SPAN Class="swiss"><A HREF="RM-4-6.html#S0141">type_conversion</A></SPAN>s, 
type conversions are performed implicitly in situations where the expected 
type and the actual type of a construct differ, as is permitted by the 
type resolution rules (see <A HREF="RM-8-6.html">8.6</A>). For example, 
an integer literal is of the type <I>universal_integer</I>, and is implicitly 
converted when assigned to a target of some specific integer type. Similarly, 
an actual parameter of a specific tagged type is implicitly converted 
when the corresponding formal parameter is of a class-wide type.</div>
<div class="paranum">60</div>
<div class="Notes"><A NAME="I3013"></A><A NAME="I3014"></A>Even when 
the expected and actual types are the same, implicit subtype conversions 
are performed to adjust the array bounds (if any) of an operand to match 
the desired target subtype, or to raise Constraint_Error if the (possibly 
adjusted) value does not satisfy the constraints of the target subtype.</div>
<div class="paranum">61/2</div>
<div class="Notes">20&nbsp;&nbsp;A ramification of the overload resolution 
rules is that the operand of an (explicit) <SPAN Class="swiss"><A HREF="RM-4-6.html#S0141">type_conversion</A></SPAN> 
cannot be an <SPAN Class="swiss"><A HREF="RM-4-8.html#S0143">allocator</A></SPAN>, 
an <SPAN Class="swiss"><A HREF="RM-4-3.html#S0106">aggregate</A></SPAN>, 
a <SPAN Class="swiss"><A HREF="RM-2-6.html#S0016">string_literal</A></SPAN>, 
a <SPAN Class="swiss"><A HREF="RM-2-5.html#S0015">character_literal</A></SPAN>, 
or an <SPAN Class="swiss"><A HREF="RM-4-1-4.html#S0100">attribute_reference</A></SPAN> 
for an Access or Unchecked_Access attribute. Similarly, such an <SPAN Class="swiss"><A HREF="RM-4-4.html#S0117">expression</A></SPAN> 
enclosed by parentheses is not allowed. A <SPAN Class="swiss"><A HREF="RM-4-7.html#S0142">qualified_expression</A></SPAN> 
(see <A HREF="RM-4-7.html">4.7</A>) can be used instead of such a <SPAN Class="swiss"><A HREF="RM-4-6.html#S0141">type_conversion</A></SPAN>.</div>
<div class="paranum">62</div>
<div class="Notes">21&nbsp;&nbsp;The constraint of the target subtype 
has no effect for a <SPAN Class="swiss"><A HREF="RM-4-6.html#S0141">type_conversion</A></SPAN> 
of an elementary type passed as an <B>out</B> parameter. Hence, it is 
recommended that the first subtype be specified as the target to minimize 
confusion (a similar recommendation applies to renaming and generic formal 
<B>in out</B> objects).&nbsp;</div>

<H4 Class="centered">Examples</H4>
<div class="paranum">63</div>
<div class="Normal" style="margin-bottom: 0.4em"><I>Examples of numeric 
type conversion:</I>&nbsp;</div>
<div class="paranum">64</div>
<div class="Examples">Real(2*J)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN Class="roman"><I>--&nbsp;&nbsp;value&nbsp;is&nbsp;converted&nbsp;to&nbsp;floating&nbsp;point</I></SPAN><BR>
Integer(1.6)&nbsp;&nbsp;&nbsp;<SPAN Class="roman"><I>--&nbsp;&nbsp;value&nbsp;is&nbsp;2</I></SPAN><BR>
Integer(-0.4)&nbsp;&nbsp;<SPAN Class="roman"><I>--&nbsp;&nbsp;value&nbsp;is&nbsp;0</I></SPAN></div>
<div class="paranum">65</div>
<div class="WideAbove" style="margin-bottom: 0.4em"><I>Example of conversion 
between derived types:</I>&nbsp;</div>
<div class="paranum">66</div>
<div class="Examples"><B>type</B>&nbsp;A_Form&nbsp;<B>is</B>&nbsp;<B>new</B>&nbsp;B_Form;</div>
<div class="paranum">67</div>
<div class="Examples">X&nbsp;:&nbsp;A_Form;<BR>
Y&nbsp;:&nbsp;B_Form;</div>
<div class="paranum">68</div>
<div class="Examples">X&nbsp;:=&nbsp;A_Form(Y);<BR>
Y&nbsp;:=&nbsp;B_Form(X);&nbsp;&nbsp;<SPAN Class="roman"><I>--&nbsp;&nbsp;the&nbsp;reverse&nbsp;conversion&nbsp;</I></SPAN></div>
<div class="paranum">69</div>
<div class="WideAbove" style="margin-bottom: 0.4em"><I>Examples of conversions 
between array types:</I>&nbsp;</div>
<div class="paranum">70</div>
<div class="Examples"><B>type</B>&nbsp;Sequence&nbsp;<B>is</B>&nbsp;<B>array</B>&nbsp;(Integer&nbsp;<B>range</B>&nbsp;&lt;&gt;)&nbsp;<B>of</B>&nbsp;Integer;<BR>
<B>subtype</B>&nbsp;Dozen&nbsp;<B>is</B>&nbsp;Sequence(1&nbsp;..&nbsp;12);<BR>
Ledger&nbsp;:&nbsp;<B>array</B>(1&nbsp;..&nbsp;100)&nbsp;<B>of</B>&nbsp;Integer;</div>
<div class="paranum">71</div>
<div class="Examples">Sequence(Ledger)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN Class="roman"><I>--&nbsp;&nbsp;bounds&nbsp;are&nbsp;those&nbsp;of&nbsp;Ledger</I></SPAN><BR>
Sequence(Ledger(31&nbsp;..&nbsp;42))&nbsp;&nbsp;<SPAN Class="roman"><I>--&nbsp;&nbsp;bounds&nbsp;are&nbsp;31&nbsp;and&nbsp;42</I></SPAN><BR>
Dozen(Ledger(31&nbsp;..&nbsp;42))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN Class="roman"><I>--&nbsp;&nbsp;bounds&nbsp;are&nbsp;those&nbsp;of&nbsp;Dozen&nbsp;</I></SPAN></div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="RM-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-4-5-8.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-4-7.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle; font-size:120%">Ada 2005 and 2012 Editions sponsored in part by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
