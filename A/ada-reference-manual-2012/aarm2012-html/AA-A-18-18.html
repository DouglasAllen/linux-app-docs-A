<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>The Generic Package Containers.Indefinite_Holders</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Indented2 {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 5.2em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.2em; margin-bottom: 0.6em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 3.4em; margin-bottom: 0.6em}
    DIV.Bulleted-NoPrefix {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><B><SPAN Style="font-size:200%; color: rgb(0,51,153)">Annotated</SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)">&nbsp;Ada Reference Manual</SPAN></B> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-A-18-17.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-A-18-19.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>A.18.18 The Generic Package Containers.Indefinite_Holders</H1>
<div class="paranum">1/3</div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0069-1.TXT">AI05-0069-1</A></I>} 
The language-defined generic package Containers.Indefinite_Holders provides 
a private type Holder and a set of operations for that type. A holder 
container holds a single element of an indefinite type.</div>
<div class="paranum">2/3</div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0069-1.TXT">AI05-0069-1</A></I>} 
A holder container allows the declaration of an object that can be used 
like an uninitialized variable or component of an indefinite type.</div>
<div class="paranum">3/3</div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0069-1.TXT">AI05-0069-1</A></I>} 
A holder container may be <I>empty</I>. An empty holder does not contain 
an element.<A NAME="I7821"></A>&nbsp;</div>

<H4 Class="centered">Static Semantics</H4>
<div class="paranum">4/3</div>
<div class="Normal" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0069-1.TXT">AI05-0069-1</A></I>} 
The generic library package Containers.Indefinite_Holders has the following 
declaration:&nbsp;</div>
<div class="paranum">5/3</div>
<div class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0069-1.TXT">AI05-0069-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0084-1.TXT">AI05-0084-1</A></I>} 
<B>generic</B><BR>
&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;Element_Type&nbsp;(&lt;&gt;)&nbsp;<B>is&nbsp;private</B>;<BR>
&nbsp;&nbsp;&nbsp;<B>with&nbsp;function</B>&nbsp;&quot;=&quot;&nbsp;(Left,&nbsp;Right&nbsp;:&nbsp;Element_Type)&nbsp;<B>return</B>&nbsp;Boolean&nbsp;<B>is</B>&nbsp;&lt;&gt;;<BR>
<B>package</B>&nbsp;Ada.Containers.Indefinite_Holders&nbsp;<B>is</B><A NAME="I7822"></A><BR>
&nbsp;&nbsp;&nbsp;<B>pragma</B>&nbsp;Preelaborate(Indefinite_Holders);<BR>
&nbsp;&nbsp;&nbsp;<B>pragma</B>&nbsp;Remote_Types(Indefinite_Holders);</div>
<div class="paranum">6/3</div>
<div class="Examples">&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;<A NAME="I7823"></A>Holder&nbsp;<B>is&nbsp;tagged&nbsp;private</B>;<BR>
&nbsp;&nbsp;&nbsp;<B>pragma</B>&nbsp;Preelaborable_Initialization&nbsp;(Holder);</div>
<div class="paranum">7/3</div>
<div class="Examples">&nbsp;&nbsp;&nbsp;<A NAME="I7824"></A>Empty_Holder&nbsp;:&nbsp;<B>constant</B>&nbsp;Holder;</div>
<div class="paranum">8/3</div>
<div class="Examples">&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;&quot;=&quot;&nbsp;(Left,&nbsp;Right&nbsp;:&nbsp;Holder)&nbsp;<B>return</B>&nbsp;Boolean;</div>
<div class="paranum">9/3</div>
<div class="Examples">&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I7825"></A>To_Holder&nbsp;(New_Item&nbsp;:&nbsp;Element_Type)&nbsp;<B>return</B>&nbsp;Holder;</div>
<div class="paranum">10/3</div>
<div class="Examples">&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I7826"></A>Is_Empty&nbsp;(Container&nbsp;:&nbsp;Holder)&nbsp;<B>return</B>&nbsp;Boolean;</div>
<div class="paranum">11/3</div>
<div class="Examples">&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;<A NAME="I7827"></A>Clear&nbsp;(Container&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Holder);</div>
<div class="paranum">12/3</div>
<div class="Examples">&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I7828"></A>Element&nbsp;(Container&nbsp;:&nbsp;Holder)&nbsp;<B>return</B>&nbsp;Element_Type;</div>
<div class="paranum">13/3</div>
<div class="Examples">&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;<A NAME="I7829"></A>Replace_Element&nbsp;(Container&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Holder;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;New_Item&nbsp;&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Element_Type);</div>
<div class="paranum">14/3</div>
<div class="Examples">&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;<A NAME="I7830"></A>Query_Element<BR>
&nbsp;&nbsp;(Container&nbsp;:&nbsp;<B>in</B>&nbsp;Holder;<BR>
&nbsp;&nbsp;&nbsp;Process&nbsp;&nbsp;&nbsp;:&nbsp;<B>not&nbsp;null&nbsp;access&nbsp;procedure</B>&nbsp;(Element&nbsp;:&nbsp;<B>in</B>&nbsp;Element_Type));</div>
<div class="paranum">15/3</div>
<div class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0069-1.TXT">AI05-0069-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0248-1.TXT">AI05-0248-1</A></I>} 
&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;<A NAME="I7831"></A>Update_Element<BR>
&nbsp;&nbsp;(Container&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Holder;<BR>
&nbsp;&nbsp;&nbsp;Process&nbsp;&nbsp;&nbsp;:&nbsp;<B>not&nbsp;null&nbsp;access&nbsp;procedure</B>&nbsp;(Element&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Element_Type));</div>
<div class="paranum">16/3</div>
<div class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0212-1.TXT">AI05-0212-1</A></I>} 
&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;<A NAME="I7832"></A>Constant_Reference_Type<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Element&nbsp;:&nbsp;<B>not&nbsp;null&nbsp;access&nbsp;constant</B>&nbsp;Element_Type)&nbsp;<B>is&nbsp;private</B><BR>
&nbsp;&nbsp;&nbsp;<B>with</B>&nbsp;Implicit_Dereference&nbsp;=&gt;&nbsp;Element;</div>
<div class="paranum">17/3</div>
<div class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0212-1.TXT">AI05-0212-1</A></I>} 
&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;<A NAME="I7833"></A>Reference_Type&nbsp;(Element&nbsp;:&nbsp;<B>not&nbsp;null&nbsp;access</B>&nbsp;Element_Type)&nbsp;<B>is&nbsp;private</B><BR>
&nbsp;&nbsp;&nbsp;<B>with</B>&nbsp;Implicit_Dereference&nbsp;=&gt;&nbsp;Element;</div>
<div class="paranum">18/3</div>
<div class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0212-1.TXT">AI05-0212-1</A></I>} 
&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I7834"></A>Constant_Reference&nbsp;(Container&nbsp;:&nbsp;<B>aliased&nbsp;in</B>&nbsp;Holder)<BR>
&nbsp;&nbsp;&nbsp;<B>return</B>&nbsp;Constant_Reference_Type;</div>
<div class="paranum">19/3</div>
<div class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0212-1.TXT">AI05-0212-1</A></I>} 
&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I7835"></A>Reference&nbsp;(Container&nbsp;:&nbsp;<B>aliased&nbsp;in&nbsp;out</B>&nbsp;Holder)<BR>
&nbsp;&nbsp;&nbsp;<B>return</B>&nbsp;Reference_Type;</div>
<div class="paranum">20/3</div>
<div class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0001-1.TXT">AI05-0001-1</A></I>} 
&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;<A NAME="I7836"></A>Assign&nbsp;(Target&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Holder;&nbsp;Source&nbsp;:&nbsp;<B>in</B>&nbsp;Holder);</div>
<div class="paranum">21/3</div>
<div class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0001-1.TXT">AI05-0001-1</A></I>} 
&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I7837"></A>Copy&nbsp;(Source&nbsp;:&nbsp;Holder)&nbsp;<B>return</B>&nbsp;Holder;</div>
<div class="paranum">22/3</div>
<div class="Examples">&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;<A NAME="I7838"></A>Move&nbsp;(Target&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Holder;&nbsp;Source&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Holder);</div>
<div class="paranum">23/3</div>
<div class="Examples"><B>private</B></div>
<div class="paranum">24/3</div>
<div class="Examples">&nbsp;&nbsp;&nbsp;...&nbsp;--&nbsp;<SPAN Class="roman"><I>not&nbsp;specified&nbsp;by&nbsp;the&nbsp;language</I></SPAN></div>
<div class="paranum">25/3</div>
<div class="Examples"><B>end</B>&nbsp;Ada.Containers.Indefinite_Holders;</div>
<div class="paranum">26/3</div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0069-1.TXT">AI05-0069-1</A></I>} 
The actual function for the generic formal function &quot;=&quot; on 
Element_Type values is expected to define a reflexive and symmetric relationship 
and return the same result value each time it is called with a particular 
pair of values. If it behaves in some other manner, the function &quot;=&quot; 
on holder values returns an unspecified value. The exact arguments and 
number of calls of this generic formal function by the function &quot;=&quot; 
on holder values are unspecified.</div>
<div class="paranum">26.a/3</div>
<div class="Annotations"><B>Ramification:&nbsp;</B>If the actual function 
for &quot;=&quot; is not symmetric and consistent, the result returned 
by any of the functions defined to use &quot;=&quot; cannot be predicted. 
The implementation is not required to protect against &quot;=&quot; raising 
an exception, or returning random results, or any other &quot;bad&quot; 
behavior. And it can call &quot;=&quot; in whatever manner makes sense. 
But note that only the results of the function &quot;=&quot; is unspecified; 
other subprograms are not allowed to break if &quot;=&quot; is bad.&nbsp;</div>
<div class="paranum">27/3</div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0069-1.TXT">AI05-0069-1</A></I>} 
The type Holder is used to represent holder containers. The type Holder 
needs finalization<A NAME="I7839"></A> (see <A HREF="AA-7-6.html">7.6</A>).</div>
<div class="paranum">28/3</div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0069-1.TXT">AI05-0069-1</A></I>} 
Empty_Holder represents an empty holder object. If an object of type 
Holder is not otherwise initialized, it is initialized to the same value 
as Empty_Holder.</div>
<div class="paranum">29/3</div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0069-1.TXT">AI05-0069-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0262-1.TXT">AI05-0262-1</A></I>} 
[Some operations of this generic package have access-to-subprogram parameters. 
To ensure such operations are well-defined, they guard against certain 
actions by the designated subprogram. In particular, some operations 
check for &ldquo;tampering with the element&rdquo; of a container because 
they depend on the element of the container not being replaced.]</div>
<div class="paranum">30/3</div>
<div class="Normal" style="margin-bottom: 0.4em">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0069-1.TXT">AI05-0069-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0262-1.TXT">AI05-0262-1</A></I>} 
<A NAME="I7840"></A>A subprogram is said to <I>tamper with the element</I> 
of a holder object <I>H</I> if:</div>
<div class="paranum">31/3</div>
<div class="Bulleted">It clears the element contained by <I>H</I>, that 
is, it calls the Clear procedure with <I>H</I> as a parameter;</div>
<div class="paranum">32/3</div>
<div class="Bulleted">It replaces the element contained by <I>H</I>, 
that is, it calls the Replace_Element procedure with <I>H</I> as a parameter;</div>
<div class="paranum">33/3</div>
<div class="Bulleted">It calls the Move procedure with <I>H</I> as a 
parameter;</div>
<div class="paranum">34/3</div>
<div class="Bulleted">It finalizes <I>H</I>.</div>
<div class="paranum">34.a/3</div>
<div class="Annotations"><B>Reason:&nbsp;</B>Complete replacement of an element 
can cause its memory to be deallocated while another operation is holding 
onto a reference to it. That can't be allowed. However, a simple modification 
of (part of) an element is not a problem, so Update_Element does not 
cause a problem.&nbsp;</div>
<div class="paranum">35/3</div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0265-1.TXT">AI05-0265-1</A></I>} 
<A NAME="I7841"></A><A NAME="I7842"></A>When tampering with the element 
is <I>prohibited</I> for a particular holder object <I>H</I>, Program_Error 
is propagated by a call of any language-defined subprogram that is defined 
to tamper with the element of <I>H</I>, leaving <I>H</I> unmodified.</div>
<div class="paranum">36/3</div>
<div class="Examples"><B>function</B>&nbsp;&quot;=&quot;&nbsp;(Left,&nbsp;Right&nbsp;:&nbsp;Holder)&nbsp;<B>return</B>&nbsp;Boolean;</div>
<div class="paranum">37/3</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0069-1.TXT">AI05-0069-1</A></I>} 
If Left and Right denote the same holder object, then the function returns 
True. Otherwise, it compares the element contained in Left to the element 
contained in Right using the generic formal equality operator, returning 
the result of that operation. Any exception raised during the evaluation 
of element equality is propagated.</div>
<div class="paranum">37.a/3</div>
<div class="Annotations"><B>Implementation Note:&nbsp;</B>This wording describes 
the canonical semantics. However, the order and number of calls on the 
formal equality <B>function</B> is unspecified, so an implementation 
need not call the equality function if the correct answer can be determined 
without doing so.&nbsp;</div>
<div class="paranum">38/3</div>
<div class="Examples"><B>function</B>&nbsp;To_Holder&nbsp;(New_Item&nbsp;:&nbsp;Element_Type)&nbsp;<B>return</B>&nbsp;Holder;</div>
<div class="paranum">39/3</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0069-1.TXT">AI05-0069-1</A></I>} 
Returns a nonempty holder containing an element initialized to New_Item.</div>
<div class="paranum">40/3</div>
<div class="Examples"><B>function</B>&nbsp;Is_Empty&nbsp;(Container&nbsp;:&nbsp;Holder)&nbsp;<B>return</B>&nbsp;Boolean;</div>
<div class="paranum">41/3</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0069-1.TXT">AI05-0069-1</A></I>} 
Returns True if Container is empty, and False if it contains an element.</div>
<div class="paranum">42/3</div>
<div class="Examples"><B>procedure</B>&nbsp;Clear&nbsp;(Container&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Holder);</div>
<div class="paranum">43/3</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0069-1.TXT">AI05-0069-1</A></I>} 
Removes the element from Container. Container is empty after a successful 
Clear operation.</div>
<div class="paranum">44/3</div>
<div class="Examples"><B>function</B>&nbsp;Element&nbsp;(Container&nbsp;:&nbsp;Holder)&nbsp;<B>return</B>&nbsp;Element_Type;</div>
<div class="paranum">45/3</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0069-1.TXT">AI05-0069-1</A></I>} 
If Container is empty, Constraint_Error is propagated. Otherwise, returns 
the element stored in Container.</div>
<div class="paranum">46/3</div>
<div class="Examples"><B>procedure</B>&nbsp;Replace_Element&nbsp;(Container&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Holder;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;New_Item&nbsp;&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Element_Type);</div>
<div class="paranum">47/3</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0069-1.TXT">AI05-0069-1</A></I>} 
Replace_Element assigns the value New_Item into Container, replacing 
any preexisting content of Container. Container is not empty after a 
successful call to Replace_Element.</div>
<div class="paranum">48/3</div>
<div class="Examples"><B>procedure</B>&nbsp;Query_Element<BR>
&nbsp;&nbsp;(Container&nbsp;:&nbsp;<B>in</B>&nbsp;Holder;<BR>
&nbsp;&nbsp;&nbsp;Process&nbsp;&nbsp;&nbsp;:&nbsp;<B>not&nbsp;null&nbsp;access&nbsp;procedure</B>&nbsp;(Element&nbsp;:&nbsp;<B>in</B>&nbsp;Element_Type));</div>
<div class="paranum">49/3</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0069-1.TXT">AI05-0069-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0262-1.TXT">AI05-0262-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0265-1.TXT">AI05-0265-1</A></I>} 
If Container is empty, Constraint_Error is propagated. Otherwise, Query_Element 
calls Process.<B>all</B> with the contained element as the argument. 
Tampering with the element of Container is prohibited during the execution 
of the call on Process.<B>all</B>. Any exception raised by Process.<B>all</B> 
is propagated.</div>
<div class="paranum">49.a/3</div>
<div class="Annotations"><B>Implementation Note:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0005-1.TXT">AI05-0005-1</A></I>} 
The &ldquo;tamper with the element&rdquo; check is intended to prevent 
the Element parameter of Process from being replaced or deleted outside 
of Process. The check prevents data loss (if Element_Type is passed by 
copy) or erroneous execution (if Element_Type is an unconstrained type). 
</div>
<div class="paranum">50/3</div>
<div class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0069-1.TXT">AI05-0069-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0248-1.TXT">AI05-0248-1</A></I>} 
<B>procedure</B>&nbsp;Update_Element<BR>
&nbsp;&nbsp;(Container&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Holder;<BR>
&nbsp;&nbsp;&nbsp;Process&nbsp;&nbsp;&nbsp;:&nbsp;<B>not&nbsp;null&nbsp;access&nbsp;procedure</B>&nbsp;(Element&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Element_Type));</div>
<div class="paranum">51/3</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0069-1.TXT">AI05-0069-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0262-1.TXT">AI05-0262-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0265-1.TXT">AI05-0265-1</A></I>} 
If Container is empty, Constraint_Error is propagated. Otherwise, Update_Element 
calls Process.<B>all</B> with the contained element as the argument. 
Tampering with the element of Container is prohibited during the execution 
of the call on Process.<B>all</B>. Any exception raised by Process.<B>all</B> 
is propagated.</div>
<div class="paranum">51.a/3</div>
<div class="Annotations"><B>Implementation Note:&nbsp;</B>The Element parameter 
of Process.<B>all</B> may be constrained even if Element_Type is unconstrained. 
</div>
<div class="paranum">52/3</div>
<div class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0212-1.TXT">AI05-0212-1</A></I>} 
<B>type</B>&nbsp;Constant_Reference_Type<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Element&nbsp;:&nbsp;<B>not&nbsp;null&nbsp;access&nbsp;constant</B>&nbsp;Element_Type)&nbsp;<B>is&nbsp;private</B><BR>
&nbsp;&nbsp;&nbsp;<B>with</B>&nbsp;Implicit_Dereference&nbsp;=&gt;&nbsp;Element;</div>
<div class="paranum">53/3</div>
<div class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0212-1.TXT">AI05-0212-1</A></I>} 
<B>type</B>&nbsp;Reference_Type&nbsp;(Element&nbsp;:&nbsp;<B>not&nbsp;null&nbsp;access</B>&nbsp;Element_Type)&nbsp;<B>is&nbsp;private</B><BR>
&nbsp;&nbsp;&nbsp;<B>with</B>&nbsp;Implicit_Dereference&nbsp;=&gt;&nbsp;Element;</div>
<div class="paranum">54/3</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0212-1.TXT">AI05-0212-1</A></I>} 
The types Constant_Reference_Type and Reference_Type need finalization.<A NAME="I7843"></A></div>
<div class="paranum">55/3</div>
<div class="Indented2">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0212-1.TXT">AI05-0212-1</A></I>} 
The default initialization of an object of type Constant_Reference_Type 
or Reference_Type propagates Program_Error.</div>
<div class="paranum">55.a/3</div>
<div class="Annotations"><B>Reason:&nbsp;</B>It is expected that Reference_Type 
(and Constant_Reference_Type) will be a controlled type, for which finalization 
will have some action to terminate the tampering check for the associated 
container. If the object is created by default, however, there is no 
associated container. Since this is useless, and supporting this case 
would take extra work, we define it to raise an exception.&nbsp;</div>
<div class="paranum">56/3</div>
<div class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0212-1.TXT">AI05-0212-1</A></I>} 
<B>function</B>&nbsp;Constant_Reference&nbsp;(Container&nbsp;:&nbsp;<B>aliased&nbsp;in</B>&nbsp;Holder)<BR>
&nbsp;&nbsp;&nbsp;<B>return</B>&nbsp;Constant_Reference_Type;</div>
<div class="paranum">57/3</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0212-1.TXT">AI05-0212-1</A></I>} 
This function (combined with the Implicit_Dereference aspect) provides 
a convenient way to gain read access to the contained element of a holder 
container.</div>
<div class="paranum">58/3</div>
<div class="Indented2">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0212-1.TXT">AI05-0212-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0262-1.TXT">AI05-0262-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0265-1.TXT">AI05-0265-1</A></I>} 
If Container is empty, Constraint_Error is propagated. Otherwise, Constant_Reference 
returns an object whose discriminant is an access value that designates 
the contained element. Tampering with the elements of Container is prohibited 
while the object returned by Constant_Reference exists and has not been 
finalized.</div>
<div class="paranum">59/3</div>
<div class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0212-1.TXT">AI05-0212-1</A></I>} 
<B>function</B>&nbsp;Reference&nbsp;(Container&nbsp;:&nbsp;<B>aliased&nbsp;in&nbsp;out</B>&nbsp;Holder)<BR>
&nbsp;&nbsp;&nbsp;<B>return</B>&nbsp;Reference_Type;</div>
<div class="paranum">60/3</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0212-1.TXT">AI05-0212-1</A></I>} 
This function (combined with the Implicit_Dereference aspects) provides 
a convenient way to gain read and write access to the contained element 
of a holder container.</div>
<div class="paranum">61/3</div>
<div class="Indented2">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0212-1.TXT">AI05-0212-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0262-1.TXT">AI05-0262-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0265-1.TXT">AI05-0265-1</A></I>} 
If Container is empty, Constraint_Error is propagated. Otherwise, Reference 
returns an object whose discriminant is an access value that designates 
the contained element. Tampering with the elements of Container is prohibited 
while the object returned by Reference exists and has not been finalized. 
</div>
<div class="paranum">62/3</div>
<div class="Examples"><B>procedure</B>&nbsp;Assign&nbsp;(Target&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Holder;&nbsp;Source&nbsp;:&nbsp;<B>in</B>&nbsp;Holder);</div>
<div class="paranum">63/3</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0001-1.TXT">AI05-0001-1</A></I>} 
If Target denotes the same object as Source, the operation has no effect. 
If Source is empty, Clear (Target) is called. Otherwise, Replace_Element 
(Target, Element (Source)) is called.&nbsp;</div>
<div class="paranum">63.a/3</div>
<div class="Annotations"><B>Discussion:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0005-1.TXT">AI05-0005-1</A></I>} 
This routine exists for compatibility with the other containers. For 
a holder, <TT>Assign(A, B)</TT> and <TT>A := B</TT> behave effectively 
the same. (Assign Clears the Target, while := finalizes the Target, but 
these should have similar effects.)&nbsp;</div>
<div class="paranum">64/3</div>
<div class="Examples"><B>function</B>&nbsp;Copy&nbsp;(Source&nbsp;:&nbsp;Holder)&nbsp;<B>return</B>&nbsp;Holder;</div>
<div class="paranum">65/3</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0001-1.TXT">AI05-0001-1</A></I>} 
If Source is empty, returns an empty holder container; otherwise, returns 
To_Holder (Element (Source)).</div>
<div class="paranum">66/3</div>
<div class="Examples"><B>procedure</B>&nbsp;Move&nbsp;(Target&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Holder;&nbsp;Source&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Holder);</div>
<div class="paranum">67/3</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0069-1.TXT">AI05-0069-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0248-1.TXT">AI05-0248-1</A></I>} 
If Target denotes the same object as Source, then the operation has no 
effect. Otherwise, the element contained by Source (if any) is removed 
from Source and inserted into Target, replacing any preexisting content. 
Source is empty after a successful call to Move.</div>

<H4 Class="centered">Bounded (Run-Time) Errors</H4>
<div class="paranum">68/3</div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0022-1.TXT">AI05-0022-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0069-1.TXT">AI05-0069-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0248-1.TXT">AI05-0248-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0262-1.TXT">AI05-0262-1</A></I>} 
<A NAME="I7844"></A>It is a bounded error for the actual function associated 
with a generic formal subprogram, when called as part of an operation 
of this package, to tamper with the element of any Holder parameter of 
the operation. Either Program_Error is raised, or the operation works 
as defined on the value of the Holder either prior to, or subsequent 
to, some or all of the modifications to the Holder.</div>
<div class="paranum">69/3</div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0027-1.TXT">AI05-0027-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0069-1.TXT">AI05-0069-1</A></I>} 
<A NAME="I7845"></A>It is a bounded error to call any subprogram declared 
in the visible part of Containers.Indefinite_Holders when the associated 
container has been finalized. If the operation takes Container as an 
<B>in out</B> parameter, then it raises Constraint_Error or Program_Error. 
Otherwise, the operation either proceeds as it would for an empty container, 
or it raises Constraint_Error or Program_Error.&nbsp;</div>

<H4 Class="centered">Erroneous Execution</H4>
<div class="paranum">70/3</div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0212-1.TXT">AI05-0212-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0269-1.TXT">AI05-0269-1</A></I>} 
Execution is erroneous if the holder container associated with the result 
of a call to Reference or Constant_Reference is finalized before the 
result object returned by the call to Reference or Constant_Reference 
is finalized.<A NAME="I7846"></A></div>
<div class="paranum">70.a/3</div>
<div class="Annotations"><B>Reason:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0212-1.TXT">AI05-0212-1</A></I>} 
Each object of Reference_Type and Constant_Reference_Type probably contains 
some reference to the originating container. If that container is prematurely 
finalized (which is only possible via Unchecked_Deallocation, as accessibility 
checks prevent passing a container to Reference that will not live as 
long as the result), the finalization of the object of Reference_Type 
will try to access a nonexistent object. This is a normal case of a dangling 
pointer created by Unchecked_Deallocation; we have to explicitly mention 
it here as the pointer in question is not visible in the specification 
of the type. (This is the same reason we have to say this for invalid 
cursors.)&nbsp;</div>

<H4 Class="centered">Implementation Requirements</H4>
<div class="paranum">71/3</div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0069-1.TXT">AI05-0069-1</A></I>} 
No storage associated with a holder object shall be lost upon assignment 
or scope exit.</div>
<div class="paranum">72/3</div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0069-1.TXT">AI05-0069-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0269-1.TXT">AI05-0269-1</A></I>} 
The execution of an <SPAN Class="swiss"><A HREF="AA-5-2.html#S0152">assignment_statement</A></SPAN> 
for a holder container shall have the effect of copying the element (if 
any) from the source holder object to the target holder object.</div>
<div class="paranum">72.a/3</div>
<div class="Annotations"><B>Implementation Note:&nbsp;</B>An assignment of 
a holder container is a &ldquo;deep&rdquo; copy; that is the element 
is copied as well as any data structures. We say &ldquo;effect of&rdquo; 
in order to allow the implementation to avoid copying the element immediately 
if it wishes. For instance, an implementation that avoided copying until 
one of the containers is modified would be allowed.&nbsp;</div>

<H4 Class="centered">Implementation Advice</H4>
<div class="paranum">73/3</div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0069-1.TXT">AI05-0069-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0269-1.TXT">AI05-0269-1</A></I>} 
Move should not copy the element, and should minimize copying of internal 
data structures.&nbsp;</div>
<div class="paranum">73.a.1/3</div>
<div class="Annotations"><B>Implementation Advice:&nbsp;</B>Containers.Indefinite_Holders.Move 
should not copy the element, and should minimize copying of internal 
data structures.</div>
<div class="paranum">73.a/3</div>
<div class="Annotations"><B>Implementation Note:&nbsp;</B>Usually that can 
be accomplished simply by moving the pointer(s) to the internal data 
structures from the Source holder to the Target holder.&nbsp;</div>
<div class="paranum">74/3</div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0069-1.TXT">AI05-0069-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0269-1.TXT">AI05-0269-1</A></I>} 
If an exception is propagated from a holder operation, no storage should 
be lost, nor should the element be removed from a holder container unless 
specified by the operation.&nbsp;</div>
<div class="paranum">74.a.1/3</div>
<div class="Annotations"><B>Implementation Advice:&nbsp;</B>If an exception 
is propagated from a holder operation, no storage should be lost, nor 
should the element be removed from a holder container unless specified 
by the operation.</div>
<div class="paranum">74.a/3</div>
<div class="Annotations"><B>Reason:&nbsp;</B>This is important so that programs 
can recover from errors. But we don't want to require heroic efforts, 
so we just require documentation of cases where this can't be accomplished. 
</div>

<H4 Class="centered">Extensions to Ada 2005</H4>
<div class="paranum">74.b/3</div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0069-1.TXT">AI05-0069-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0084-1.TXT">AI05-0084-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0265-1.TXT">AI05-0265-1</A></I>} 
<A NAME="I7847"></A> The generic package Containers.Indefinite_Holders 
is new.&nbsp;</div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-A-18-17.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-A-18-19.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle; font-size:120%">Ada 2005 and 2012 Editions sponsored in part by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
